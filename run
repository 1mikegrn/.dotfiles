install() {
    if [ $2 = "deps" ]
    then
        if [ -x "$(command -v pacman)" ]
        then
            sudo pacman -Sy stow the_silver_searcher
        elif [ -x "$(command -v apt-get)" ]
        then
            sudo apt-get install stow silversearcher-ag
        fi
        sudo npm install -g neovim
        python -m pip install pynvim
        git submodule update
    else
        pushd ~/.dotfiles

        for folder in $(ls -d */ | sed "s/,/ /g")
        do
            stow $folder
        done
        ~/.fzf/install
        nvim +PlugInstall +qall
        popd
    fi
}

remove() {
        rm -rf ~/.config/coc/extensions/
        nvim +PlugUninstall +qall
        for folder in $(ls -d */ | sed "s/,/ /g")
        do
            stow -D $folder
        done
        ~/.fzf/uninstall
}

reinstall() {
    remove
    install
}

case $1 in
    "install") install $@ ;;
    "remove") remove $@ ;;
    "reinstall") reinstall $@ ;;
esac
